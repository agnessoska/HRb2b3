# План исправления навигации на HR Dashboard

## Проблема 1: Сброс активной вкладки
При обновлении страницы или нажатии кнопки "Назад" в браузере состояние `activeTab` сбрасывается на дефолтное ('vacancies'), так как оно хранится только в `useState`.

### Решение: Синхронизация с URL Query Params
1.  **Использовать `useSearchParams`** из `react-router-dom` вместо `useState` для управления активной вкладкой.
2.  **Чтение состояния:** При загрузке компонента инициализировать активную вкладку из параметра `?tab=...`. Если параметр отсутствует, использовать дефолтное значение 'vacancies'.
3.  **Запись состояния:** При переключении вкладок обновлять URL через `setSearchParams`, добавляя параметр `tab`. Это автоматически добавит запись в историю браузера.

## Проблема 2: Некорректная навигация "Назад" из результатов анализа
Компонент `ResumeAnalysis` имеет внутреннее состояние `analysisResult`. Когда пользователь нажимает кнопку "Назад" в браузере, он ожидает вернуться к форме анализа, но вместо этого браузер переходит на предыдущую страницу в истории (например, "Команда"), так как внутреннее состояние компонента не отражается в URL.

### Решение: Управление состоянием просмотра результатов через URL
1.  **Добавить параметр `view`** в URL (например, `?tab=resume-analysis&view=result`).
2.  **В `ResumeAnalysis`:**
    *   Следить за параметром `view` в URL.
    *   Если `view=result` и есть данные анализа, показывать результаты.
    *   При нажатии кнопки "Назад" (в UI) или "Начать новый анализ", удалять параметр `view` из URL.
    *   При успешном анализе добавлять `view=result` в URL.
3.  **Обработка браузерной кнопки "Назад":**
    *   Так как изменение `view` происходит через URL, браузерная кнопка "Назад" будет корректно переключать между режимом просмотра результата и формой, не уходя со страницы.

## План реализации

### Шаг 1: Обновление `HRDashboardPage` (`src/pages/hr/dashboard/index.tsx`)
-   Заменить `useState` на `useSearchParams`.
-   Обновить логику `Tabs` и `Select` для работы с search params.
-   Обеспечить совместимость с существующими ссылками (дефолтное значение).

### Шаг 2: Обновление `ResumeAnalysis` (`src/features/ai-analysis/ui/ResumeAnalysis.tsx`)
-   Интегрировать `useSearchParams`.
-   Синхронизировать отображение `ResumeAnalysisResult` с параметром `view=result`.
-   Обеспечить сохранение/восстановление состояния `analysisResult` (опционально, если хотим чтобы оно жило при рефреше - можно сохранять в localStorage или просто полагаться на то, что "Назад" работает в рамках сессии).
    *   *Уточнение:* Для полноценной работы "Назад" при рефреше страницы с `view=result` нам нужно либо восстанавливать данные (например, из `location.state` или `localStorage`), либо перенаправлять на список, если данных нет. Для начала сделаем через URL + проверка наличия данных в state. Если данных нет (рефреш), сбрасываем `view`.

### Шаг 3: Тестирование
-   Переключение вкладок -> меняется URL.
-   Обновление страницы -> вкладка сохраняется.
-   Кнопка "Назад" в браузере -> вкладки переключаются обратно.
-   Анализ резюме -> появляется результат -> URL меняется.
-   Кнопка "Назад" в браузере из результата -> возврат к форме.